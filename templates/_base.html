{% load compress %}
{% load static %}
{% load django_htmx %}
<!DOCTYPE html>
<html lang="es">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>H. Ayuntamiento de Esc√°rcega</title>
      <link href="{% static "images/logo-2.png" %}" rel="icon"> 
      <link rel="stylesheet" href="{% static "css/style.css" %}">
      {% compress css %}
      {% django_htmx_script %}
      <link rel="stylesheet" href="{% static 'src/output.css' %}">
      {% endcompress %}
      <script src="https://unpkg.com/htmx.org@2.0.2"></script>
      <script src="https://unpkg.com/htmx.org@1.9.12/dist/ext/ws.js"></script>  
      <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
      <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
      <script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
      <script src="https://cdn.datatables.net/2.2.2/js/dataTables.tailwindcss.js"></script>
      <script src="https://cdn.datatables.net/fixedcolumns/5.0.4/js/dataTables.fixedColumns.js"></script>
      <script src="https://cdn.datatables.net/fixedcolumns/5.0.4/js/fixedColumns.dataTables.js"></script>
      <!--<script src="https://cdn.datatables.net/buttons/3.2.2/js/buttons.dataTables.js"> </script>
      <script src="https://cdn.datatables.net/buttons/3.2.2/js/dataTables.buttons.js"></script>-->
      <link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.css">
      <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/5.0.4/css/fixedColumns.dataTables.css">
      <!--<link rel="stylesheet" href="https://cdn.datatables.net/buttons/3.2.2/css/buttons.dataTables.css">-->
  </head>
  <body class="bg-rojo" hx-ext="ws" 
  {% if request.user.is_authenticated%}
    ws-connect="/ws/notifications/" 
  {%endif%}
  >
      <div class="w-full px-5">
        {% block layout %}    
        {% endblock %}
        {% if request.user.is_authenticated%}
        {% comment %} <footer hx-ext="ws" ws-connect="/ws/online-status/"></footer> {% endcomment %}
        {%endif%}
        {%block javascript%}
        {%endblock%}
      </div>
      <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
      <script>
        document.addEventListener('htmx:afterSwap', (event) => {
            if (typeof window.initFlowbite === 'function') {
                window.initFlowbite();
            }
        });
      </script>
      <!-- Script para manejar el colapso -->
      <script>
{% comment %}         const toggleBtn = document.getElementById('toggleSidebar');
        const panel = document.getElementById('panel');
        const sidebar = document.getElementById('sidebar-multi-level-sidebar');
        const sidebarTexts = document.querySelectorAll('.sidebar-text');
        window.addEventListener('load', () => {
          sidebar.classList.toggle('w-64');
          panel.classList.toggle('sm:ml-64');
          
          sidebar.classList.toggle('w-16');
          panel.classList.toggle('sm:ml-[3rem]');
          
          sidebarTexts.forEach((text) => {// Mostrar/ocultar texto
              text.classList.toggle('hidden');
          });
        });
        toggleBtn.addEventListener("click", () => {      
            sidebar.classList.toggle('w-64');
            panel.classList.toggle('sm:ml-64');
            
            sidebar.classList.toggle('w-16');
            panel.classList.toggle('sm:ml-[3rem]');
            
            sidebarTexts.forEach((text) => {// Mostrar/ocultar texto
                text.classList.toggle('hidden');
            });
        }); {% endcomment %}
      </script>
  </body>
</html>