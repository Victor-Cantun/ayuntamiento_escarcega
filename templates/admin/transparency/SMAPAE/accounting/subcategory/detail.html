<h5 id="title-modal-detail" hx-swap-oob="true" class="bg-rojo text-white items-center text-base font-semibold w-full">Detalle de subcategoría</h5>

<dl class="max-w-md text-gray-900 divide-y divide-gray-200 dark:text-white dark:divide-gray-700">
    <div class="inline-flex pb-1">
        <dt class="mb-1 text-gray-500 md:text-sm dark:text-gray-400 pr-2">Año:</dt>
        <dd class="text-sm font-semibold">{{year}}</dd>
    </div><br>
    <div class="inline-flex pb-1">
        <dt class="mb-1 text-gray-500 md:text-sm dark:text-gray-400 pr-2">Categoría</dt>
        <dd class="text-sm font-semibold">{{subcategory.group.name}}</dd>
    </div><br>
    <div class="inline-flex pb-1">
        <dt class="mb-1 text-gray-500 md:text-sm dark:text-gray-400 pr-2">Subcategoría</dt>
        <dd class="text-sm font-semibold">{{subcategory.name}}</dd>
    </div>
</dl>
<hr class="h-px my-2 bg-gray-200 border-0 dark:bg-gray-700">
<!--FORMULARIO PARA AGREGAR DOCUMENTOS-->
<h3 class="text-xl font-semibold text-red-700">
Agregar nuevo documento a subcategoría
</h3>
<form enctype="multipart/form-data"  id="FormAddDocument"
    hx-post="{% url 'AccountingNewDocument' %}" 
    hx-target="#ResultAddDocument" 
    hx-trigger="submit"  >
    {% csrf_token %}  
    {{ form.group }}
    {{ form.subgroup }}
    <div class="grid grid-cols-3 gap-2">
        <div>
            {{ form.year.label}}
            {{ form.year}}
        </div>
        <div>
            {{ form.periodo.label}}
            {{ form.periodo}}
        </div>        
        <div id="trimestre" class="hidden">
            {{ form.quarter.label}}
            {{ form.quarter}}
        </div>
        <div id="semestre" class="hidden">
            {{ form.semestre.label}}
            {{ form.semestre}}
        </div>        
    </div>
    <div class="grid grid-cols-2 gap-2">
        <div class="">
            {{ form.name.label}}
            {{ form.name}}
        </div>
        <div class="">
            {{ form.document.label}}
            {{ form.document}}
        </div> 
    </div>
    <div class="flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600">
        <button type="submit"  class="focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2   dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800">Guardar</button>
    </div>
</form>
<div id="ResultAddDocument"></div>
<!--FORMULARIO PARA AGREGAR DOCUMENTOS-->
<hr class="h-px my-2 bg-gray-200 border-0 dark:bg-gray-700">
<div id="Trimestres" ></div>
<script>
    function UpdateTrimestres(){htmx.ajax('GET', '{% url 'ListarTrimestres' year subcategory.id %}', '#Trimestres');}
</script>
<script>
    UpdateTrimestres();
    document.body.addEventListener("UpdateTrimestres", 
    function() {
        UpdateTrimestres();
            const form = document.getElementById("FormAddDocument");
            form.querySelector('[name="name"]').value = "";
            form.querySelector('[name="document"]').value = "";
            //form.reset();   // limpia todo
    }
    ); 
</script>
<script>
    const select = document.getElementById("id_periodo");
    const trimestres = document.getElementById("trimestre");
    const select_trimestre = document.getElementById("id_quarter");
    const semestre = document.getElementById("semestre");
    const select_semestre = document.getElementById("id_semestre");

    select.addEventListener("change", () => {
        if (select.value === "trimestral") {
            trimestres.style.display = "block";
            semestre.style.display = "none";
            select_semestre.value = "";
        }
        if (select.value === "semestral"){
            trimestres.style.display = "none";
            semestre.style.display = "block";
            select_trimestre.value = "";
        }
        if (select.value === "anual"){
            trimestres.style.display = "none";
            semestre.style.display = "none";
            select_trimestre.value = "";
            select_semestre.value = "";
        }
    });
</script>
